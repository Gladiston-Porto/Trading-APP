# Variáveis de Ambiente - App de Trading/Swing

## === DATABASE ===
DATABASE_URL="mysql://root:rootpassword@localhost:3306/app_trade_db"
DATABASE_HOST="localhost"
DATABASE_PORT=3306
DATABASE_USER="root"
DATABASE_PASSWORD="rootpassword"
DATABASE_NAME="app_trade_db"

## === JWT & AUTH ===
JWT_SECRET="your_super_secret_key_change_this_in_production_at_least_32_chars"
JWT_EXPIRATION="15m"
JWT_REFRESH_SECRET="your_super_secret_refresh_key_change_this_in_production_at_least_32_chars"
JWT_REFRESH_EXPIRATION="7d"
BCRYPT_ROUNDS=10

## === SERVER ===
NODE_ENV="development"
PORT=3333
HOST="0.0.0.0"
CORS_ORIGIN="http://localhost:5173,http://localhost:3333"
LOG_LEVEL="debug"

## === DATA PROVIDERS ===
# Brapi - Dados brasileiros (gratuito com limitações)
BRAPI_API_KEY="your_brapi_key_optional"
BRAPI_BASE_URL="https://brapi.dev/api"

# Yahoo Finance - Dados globais (gratuito, via biblioteca)
YAHOO_FINANCE_ENABLED="true"

# XP - Intraday para B3 (pago ~R$50/mês, opcional)
XP_API_KEY="your_xp_key_when_available"
XP_API_SECRET="your_xp_secret_when_available"
XP_ENABLED="false"

## === ALERTAS ===
# Telegram Bot
TELEGRAM_BOT_TOKEN="your_telegram_bot_token_from_botfather"
TELEGRAM_ENABLED="true"
TELEGRAM_CHAT_ID="your_telegram_chat_id_optional"

# Email (opcional, para notificações)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your_email@gmail.com"
SMTP_PASSWORD="your_app_password"
SMTP_FROM="trading-system@example.com"
EMAIL_ENABLED="false"

## === BROKERS (Stubs para expansão futura) ===
# NuInvest / Nubank (paper trading apenas no início)
NUINVEST_API_KEY="your_nuinvest_key_when_available"
NUINVEST_ENABLED="false"

# XP Investimentos (integração real futura)
XP_BROKER_ENABLED="false"

# Inter Investimentos
INTER_BROKER_ENABLED="false"

# Avenue (USD/EUA)
AVENUE_BROKER_ENABLED="false"

# Alpaca (EUA, paper/real)
ALPACA_API_KEY="your_alpaca_key_when_available"
ALPACA_ENABLED="false"

## === CRON JOBS ===
# Horários de execução (timezone: America/Sao_Paulo para B3)
CRON_UPDATE_MARKET="0 */15 * * 1-5" # A cada 15min, seg-sex (intraday)
CRON_SCAN_SIGNALS="0 10,14,16 * * 1-5" # 10am, 2pm, 4pm BRT
CRON_MANAGE_POSITIONS="0 */30 * * 1-5" # A cada 30min
CRON_CALCULATE_KPIS="0 18 * * 1-5" # 6pm (fechamento)
TIMEZONE="America/Sao_Paulo"

## === ESTRATÉGIAS (Padrões) ===
# Risco por trade em %
RISK_PER_TRADE_PCT=1.0

# Limite de perda diária em %
DAILY_LOSS_LIMIT_PCT=-3.0

# Indicadores (EMA, RSI, MACD, ATR, OBV)
STRATEGY_EMA_9="true"
STRATEGY_EMA_21="true"
STRATEGY_EMA_200="true"
STRATEGY_RSI_PERIOD=14
STRATEGY_RSI_OVERSOLD=30
STRATEGY_RSI_OVERBOUGHT=70
STRATEGY_MACD_ENABLED="true"
STRATEGY_ATR_PERIOD=14
STRATEGY_OBV_ENABLED="true"

# Volume mínimo (múltiplo da média)
VOLUME_MIN_MULTIPLIER=1.2

# Padrões
PATTERN_HAMMER_ENABLED="true"
PATTERN_ENGULFING_ENABLED="true"
PATTERN_INSIDE_BAR_ENABLED="true"
PATTERN_PIN_BAR_ENABLED="true"

## === BACKTESTING ===
BACKTEST_SLIPPAGE_PCT=0.01 # 0.01% slippage
BACKTEST_COMMISSION_PCT=0.0005 # 0.05% taxa de corretagem

## === FEATURE FLAGS ===
FEATURE_INTRADAY="false" # Ativa sinais intraday quando dados 5m/15m disponíveis
FEATURE_NEWS_EVENTS="false" # Integração com calendário de eventos econômicos
FEATURE_LLAMA_EXPLANATIONS="false" # LLM opcional para explicações
FEATURE_PAPER_TRADING="true" # Paper trading habilitado
FEATURE_AUDIT_LOG="true" # Logar todas operações

## === SEGURANÇA ===
RATE_LIMIT_WINDOW_MS=900000 # 15 min
RATE_LIMIT_MAX_REQUESTS=100 # Máx requisições por janela
RATE_LIMIT_AUTH_MAX=5 # Máx tentativas login
CORS_CREDENTIALS="true"

## === LOGGING & MONITORING ===
SENTRY_DSN="optional_sentry_dsn_for_production"
LOG_FORMAT="json" # json ou text
LOG_PRETTY_PRINT="true"

## === FRONTEND (Se necessário) ===
VITE_API_URL="http://localhost:3333"
VITE_WS_URL="ws://localhost:3333"
VITE_APP_NAME="TradingApp"
